{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jayden\\\\projects\\\\atr\\\\src\\\\react\\\\components\\\\match_history\\\\MatchHistory.js\",\n  _s = $RefreshSig$();\nimport \"./MatchHistory.css\";\nimport Match from \"../\";\nimport { useEffect, useState } from \"react\";\nimport { ClientApi } from \"../../../api/clientApi.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction MatchHistory({\n  puuid,\n  matchIdList\n}) {\n  _s();\n  const [matches, setMatches] = useState([]);\n  const [wins, setWins] = useState([]);\n  const [status, setStatus] = useState();\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    async function sleep(ms) {\n      return new Promise(res => setTimeout(res, ms));\n    }\n    async function getMatchIds() {\n      setLoading(true);\n      const wins = JSON.parse(localStorage.getItem(\"wins\")) || [];\n      const idsToFetch = wins.length > 0 ? wins : matchIdList;\n      console.log(wins);\n      console.log(idsToFetch);\n      for (const [index, id] of idsToFetch.entries()) {\n        setStatus(`Loading: ${index} / ${idsToFetch.length}`);\n        // const fetchStart = Date.now();\n        const matchData = await ClientApi.fetchMatchData(id);\n        // await sleep(200);\n\n        // const fetchDuration = Date.now() - fetchStart;\n        // const sleepMs = 1200 - fetchDuration;\n        // await sleep(sleepMs);\n\n        const matchInfo = new Match(puuid, matchData);\n        if (matchInfo.getPlacement() === 1 && !wins.includes(id)) {\n          wins.push(id);\n          setWins(prev => [...prev, matchInfo]);\n        }\n        setWins(prev => [...prev, matchInfo]);\n        localStorage.setItem(\"wins\", JSON.stringify(wins));\n        setMatches(prev => [...prev, matchInfo]);\n      }\n      setLoading(false);\n      // setWins(wins);\n    }\n    getMatchIds();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    className: \"MatchHistory\",\n    children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this) : matches && wins.map((matchInfo, index) => {\n      return /*#__PURE__*/_jsxDEV(Match, {\n        puuid: puuid,\n        matchInfo: matchInfo\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 18\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}\n_s(MatchHistory, \"HCdHjH9mmfUx+mCBo/VCKr5l9zs=\");\n_c = MatchHistory;\nexport default MatchHistory;\nvar _c;\n$RefreshReg$(_c, \"MatchHistory\");","map":{"version":3,"names":["Match","useEffect","useState","ClientApi","jsxDEV","_jsxDEV","MatchHistory","puuid","matchIdList","_s","matches","setMatches","wins","setWins","status","setStatus","loading","setLoading","sleep","ms","Promise","res","setTimeout","getMatchIds","JSON","parse","localStorage","getItem","idsToFetch","length","console","log","index","id","entries","matchData","fetchMatchData","matchInfo","getPlacement","includes","push","prev","setItem","stringify","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","_c","$RefreshReg$"],"sources":["C:/Users/Jayden/projects/atr/src/react/components/match_history/MatchHistory.js"],"sourcesContent":["import \"./MatchHistory.css\";\r\n\r\nimport Match from \"../\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { ClientApi } from \"../../../api/clientApi.js\";\r\n\r\nfunction MatchHistory({ puuid, matchIdList }) {\r\n  const [matches, setMatches] = useState([]);\r\n  const [wins, setWins] = useState([]);\r\n  const [status, setStatus] = useState();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    async function sleep(ms) {\r\n      return new Promise((res) => setTimeout(res, ms));\r\n    }\r\n\r\n    async function getMatchIds() {\r\n      setLoading(true);\r\n      const wins = JSON.parse(localStorage.getItem(\"wins\")) || [];\r\n      const idsToFetch = wins.length > 0 ? wins : matchIdList;\r\n\r\n      console.log(wins);\r\n      console.log(idsToFetch);\r\n\r\n      for (const [index, id] of idsToFetch.entries()) {\r\n        setStatus(`Loading: ${index} / ${idsToFetch.length}`);\r\n        // const fetchStart = Date.now();\r\n        const matchData = await ClientApi.fetchMatchData(id);\r\n        // await sleep(200);\r\n\r\n        // const fetchDuration = Date.now() - fetchStart;\r\n        // const sleepMs = 1200 - fetchDuration;\r\n        // await sleep(sleepMs);\r\n\r\n        const matchInfo = new Match(puuid, matchData);\r\n\r\n        if (matchInfo.getPlacement() === 1 && !wins.includes(id)) {\r\n          wins.push(id);\r\n          setWins((prev) => [...prev, matchInfo]);\r\n        }\r\n\r\n        setWins((prev) => [...prev, matchInfo]);\r\n        localStorage.setItem(\"wins\", JSON.stringify(wins));\r\n        setMatches((prev) => [...prev, matchInfo]);\r\n      }\r\n\r\n      setLoading(false);\r\n      // setWins(wins);\r\n    }\r\n    getMatchIds();\r\n  }, []);\r\n\r\n  return (\r\n    <ul className=\"MatchHistory\">\r\n      {loading ? (\r\n        <div>{status}</div>\r\n      ) : (\r\n        matches &&\r\n        wins.map((matchInfo, index) => {\r\n          return <Match key={index} puuid={puuid} matchInfo={matchInfo} />;\r\n        })\r\n      )}\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default MatchHistory;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}