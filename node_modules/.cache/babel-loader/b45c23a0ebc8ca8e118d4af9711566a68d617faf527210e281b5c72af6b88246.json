{"ast":null,"code":"import Summoner from \"objects/Summoner\";\nimport Match from \"./Match\";\nimport MatchHistory from \"./MatchHistory\";\nimport { Client } from \"api/client\";\nclass DataManager {\n  static async createAccount(account) {}\n  static async getSummonerData(account, setStatus) {\n    let savedAccount = JSON.parse(localStorage.getItem(account.puuid));\n    console.log(savedAccount);\n    if (!savedAccount) {\n      setStatus(\"Creating new summoner\");\n      setStatus(\"Fetching Summoner:\", account.puuid);\n      const summonerDto = await Client.fetchSummoner(account.puuid);\n      setStatus(\"Fetching Match History:\", account.puuid);\n      const matchHistoryIds = await Client.fetchMatchHistory(account.puuid);\n      const matchHistory = new MatchHistory();\n      for (const matchId of matchHistoryIds) {\n        const match = new Match(matchId);\n        matchHistory.add(match);\n      }\n      console.log(matchHistory);\n      account = new Summoner(account, summonerDto, matchHistoryIds);\n      localStorage.setItem(account.puuid, JSON.stringify(account));\n    } else {\n      account = savedAccount;\n    }\n    return account;\n  }\n  static async getMatchHistoryData(puuid, matchHistory, setStatus) {\n    const savedWins = JSON.parse(localStorage.getItem(\"wins\")) || [];\n    console.log(matchHistory);\n    const idsToFetch = savedWins.length > 0 ? savedWins : matchHistory;\n    const matches = [];\n    console.log(idsToFetch);\n    for (const [index, matchId] of Object.entries(idsToFetch)) {\n      consol;\n      setStatus(`loading ${index + 1} of ${idsToFetch.length}`);\n      const matchDto = await Client.fetchMatchData(matchId);\n      console.log(matchDto);\n      const match = new Match(matchDto.metadata.matchId);\n      match.player = match.getPlayer(puuid, matchDto.metadata.participants, matchDto.info.participants);\n      match.teammate = match.getTeammate(puuid, match.player.playerSubteamId, matchDto.info.participants);\n      matches.push(match);\n    }\n    setStatus(null);\n    return matches;\n  }\n  static async processWins(puuid, matchHistoryIds) {\n    console.log(puuid, matchHistoryIds);\n    const wins = [];\n    for (const match of matchHistoryIds) {\n      const player = match.getPlayer(puuid);\n      if (player.placement === 1) {\n        wins.push(match);\n      }\n    }\n    console.log(wins);\n    return wins;\n  }\n}\nexport default DataManager;","map":{"version":3,"names":["Summoner","Match","MatchHistory","Client","DataManager","createAccount","account","getSummonerData","setStatus","savedAccount","JSON","parse","localStorage","getItem","puuid","console","log","summonerDto","fetchSummoner","matchHistoryIds","fetchMatchHistory","matchHistory","matchId","match","add","setItem","stringify","getMatchHistoryData","savedWins","idsToFetch","length","matches","index","Object","entries","consol","matchDto","fetchMatchData","metadata","player","getPlayer","participants","info","teammate","getTeammate","playerSubteamId","push","processWins","wins","placement"],"sources":["C:/Users/Jayden/projects/atr/src/objects/DataManager.js"],"sourcesContent":["import Summoner from \"objects/Summoner\";\r\n\r\nimport Match from \"./Match\";\r\nimport MatchHistory from \"./MatchHistory\";\r\n\r\nimport { Client } from \"api/client\";\r\n\r\nclass DataManager {\r\n  static async createAccount(account) {\r\n\r\n  }\r\n\r\n  static async getSummonerData(account, setStatus) {\r\n    let savedAccount = JSON.parse(localStorage.getItem(account.puuid));\r\n    console.log(savedAccount)\r\n\r\n    if (!savedAccount) {\r\n      setStatus(\"Creating new summoner\");\r\n      setStatus(\"Fetching Summoner:\", account.puuid);\r\n      const summonerDto = await Client.fetchSummoner(account.puuid);\r\n      setStatus(\"Fetching Match History:\", account.puuid);\r\n      const matchHistoryIds = await Client.fetchMatchHistory(account.puuid);\r\n\r\n\r\n      const matchHistory = new MatchHistory();\r\n      for (const matchId of matchHistoryIds) {\r\n        const match = new Match(matchId);\r\n        matchHistory.add(match);\r\n      }\r\n      console.log(matchHistory)\r\n\r\n\r\n      account = new Summoner(account, summonerDto, matchHistoryIds);\r\n\r\n      localStorage.setItem(account.puuid, JSON.stringify(account));\r\n    } else {\r\n      account = savedAccount\r\n    }\r\n\r\n    return account;\r\n  }\r\n\r\n  static async getMatchHistoryData(puuid, matchHistory, setStatus) {\r\n    const savedWins = JSON.parse(localStorage.getItem(\"wins\")) || [];\r\n    console.log(matchHistory)\r\n    const idsToFetch = savedWins.length > 0 ? savedWins : matchHistory;\r\n\r\n    const matches = [];\r\n    console.log(idsToFetch)\r\n    for (const [index, matchId] of Object.entries(idsToFetch)) {\r\n      consol\r\n      setStatus(`loading ${index + 1} of ${idsToFetch.length}`);\r\n\r\n      const matchDto = await Client.fetchMatchData(matchId);\r\n      console.log(matchDto);\r\n\r\n      const match = new Match(matchDto.metadata.matchId);\r\n      match.player = match.getPlayer(\r\n        puuid,\r\n        matchDto.metadata.participants,\r\n        matchDto.info.participants\r\n      );\r\n\r\n      match.teammate = match.getTeammate(\r\n        puuid,\r\n        match.player.playerSubteamId,\r\n        matchDto.info.participants\r\n      );\r\n\r\n      matches.push(match);\r\n    }\r\n\r\n    setStatus(null);\r\n    return matches;\r\n  }\r\n\r\n  static async processWins(puuid, matchHistoryIds) {\r\n    console.log(puuid, matchHistoryIds);\r\n\r\n    const wins = [];\r\n    for (const match of matchHistoryIds) {\r\n      const player = match.getPlayer(puuid);\r\n      if (player.placement === 1) {\r\n        wins.push(match);\r\n      }\r\n    }\r\n\r\n    console.log(wins);\r\n    return wins;\r\n  }\r\n}\r\n\r\nexport default DataManager;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}