{"ast":null,"code":"import Summoner from \"objects/Summoner\";\nimport Match from \"./Match\";\nimport MatchHistory from \"./MatchHistory\";\nimport { Client } from \"api/client\";\nclass DataManager {\n  static async createAccount() {\n    const accountDto = await Client.fetchAccount();\n  }\n  static async getSummonerData(account, setStatus) {\n    let summoner = JSON.parse(localStorage.getItem(account.key));\n    if (!summoner) {\n      setStatus(\"Creating new summoner\");\n      setStatus(\"Fetching Account:\", account.gameName, account.tagLine);\n      console.log(account);\n      const accountDto = await Client.fetchAccount(account.gameName, account.tagLine);\n      console.log(accountDto);\n      setStatus(\"Fetching Summoner:\", account.puuid);\n      const summonerDto = await Client.fetchSummoner(accountDto.puuid);\n      setStatus(\"Fetching Match History:\", account.puuid);\n      const matchHistoryIds = await Client.fetchMatchHistory(accountDto.puuid);\n      const matchHistory = new MatchHistory(matchHistoryIds);\n      summoner = new Summoner(accountDto, summonerDto, matchHistory);\n      localStorage.setItem(account.key, JSON.stringify(summoner));\n    }\n    return summoner;\n  }\n  static async getMatchHistoryData(puuid, matchHistory, setStatus) {\n    const savedWins = JSON.parse(localStorage.getItem(\"wins\")) || [];\n    const idsToFetch = savedWins.length > 0 ? savedWins : matchHistory.ids;\n    const matches = [];\n    for (const [index, matchId] of idsToFetch.entries()) {\n      setStatus(`loading ${index + 1} of ${idsToFetch.length}`);\n      const matchDto = await Client.fetchMatchData(matchId);\n      console.log(matchDto);\n      const match = new Match(matchDto.metadata.matchId);\n      match.player = match.getPlayer(puuid, matchDto.metadata.participants, matchDto.info.participants);\n      match.teammate = match.getTeammate(puuid, match.player.playerSubteamId, matchDto.info.participants);\n      matches.push(match);\n    }\n    setStatus(null);\n    return matches;\n  }\n  static async processWins(puuid, matchHistoryIds) {\n    console.log(puuid, matchHistoryIds);\n    const wins = [];\n    for (const match of matchHistoryIds) {\n      const player = match.getPlayer(puuid);\n      if (player.placement === 1) {\n        wins.push(match);\n      }\n    }\n    console.log(wins);\n    return wins;\n  }\n}\nexport default DataManager;","map":{"version":3,"names":["Summoner","Match","MatchHistory","Client","DataManager","createAccount","accountDto","fetchAccount","getSummonerData","account","setStatus","summoner","JSON","parse","localStorage","getItem","key","gameName","tagLine","console","log","puuid","summonerDto","fetchSummoner","matchHistoryIds","fetchMatchHistory","matchHistory","setItem","stringify","getMatchHistoryData","savedWins","idsToFetch","length","ids","matches","index","matchId","entries","matchDto","fetchMatchData","match","metadata","player","getPlayer","participants","info","teammate","getTeammate","playerSubteamId","push","processWins","wins","placement"],"sources":["C:/Users/Jayden/projects/atr/src/objects/DataManager.js"],"sourcesContent":["import Summoner from \"objects/Summoner\";\r\n\r\nimport Match from \"./Match\";\r\nimport MatchHistory from \"./MatchHistory\";\r\n\r\nimport { Client } from \"api/client\";\r\n\r\nclass DataManager {\r\n  static async createAccount() {\r\n\r\n    const accountDto=await Client.fetchAccount()\r\n  }\r\n  static async getSummonerData(account, setStatus) {\r\n    let summoner = JSON.parse(localStorage.getItem(account.key));\r\n\r\n    if (!summoner) {\r\n      setStatus(\"Creating new summoner\");\r\n      setStatus(\"Fetching Account:\", account.gameName, account.tagLine);\r\n      console.log(account);\r\n      const accountDto = await Client.fetchAccount(\r\n        account.gameName,\r\n        account.tagLine\r\n      );\r\n      console.log(accountDto);\r\n\r\n      setStatus(\"Fetching Summoner:\", account.puuid);\r\n      const summonerDto = await Client.fetchSummoner(accountDto.puuid);\r\n      setStatus(\"Fetching Match History:\", account.puuid);\r\n      const matchHistoryIds = await Client.fetchMatchHistory(accountDto.puuid);\r\n\r\n      const matchHistory = new MatchHistory(matchHistoryIds);\r\n      summoner = new Summoner(accountDto, summonerDto, matchHistory);\r\n\r\n      localStorage.setItem(account.key, JSON.stringify(summoner));\r\n    }\r\n\r\n    return summoner;\r\n  }\r\n\r\n  static async getMatchHistoryData(puuid, matchHistory, setStatus) {\r\n    const savedWins = JSON.parse(localStorage.getItem(\"wins\")) || [];\r\n    const idsToFetch = savedWins.length > 0 ? savedWins : matchHistory.ids;\r\n\r\n    const matches = [];\r\n    for (const [index, matchId] of idsToFetch.entries()) {\r\n      setStatus(`loading ${index + 1} of ${idsToFetch.length}`);\r\n\r\n      const matchDto = await Client.fetchMatchData(matchId);\r\n      console.log(matchDto);\r\n\r\n      const match = new Match(matchDto.metadata.matchId);\r\n      match.player = match.getPlayer(\r\n        puuid,\r\n        matchDto.metadata.participants,\r\n        matchDto.info.participants\r\n      );\r\n\r\n      match.teammate = match.getTeammate(\r\n        puuid,\r\n        match.player.playerSubteamId,\r\n        matchDto.info.participants\r\n      );\r\n\r\n      matches.push(match);\r\n    }\r\n\r\n    setStatus(null);\r\n    return matches;\r\n  }\r\n\r\n  static async processWins(puuid, matchHistoryIds) {\r\n    console.log(puuid, matchHistoryIds);\r\n\r\n    const wins = [];\r\n    for (const match of matchHistoryIds) {\r\n      const player = match.getPlayer(puuid);\r\n      if (player.placement === 1) {\r\n        wins.push(match);\r\n      }\r\n    }\r\n\r\n    console.log(wins);\r\n    return wins;\r\n  }\r\n}\r\n\r\nexport default DataManager;\r\n"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,kBAAkB;AAEvC,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,YAAY,MAAM,gBAAgB;AAEzC,SAASC,MAAM,QAAQ,YAAY;AAEnC,MAAMC,WAAW,CAAC;EAChB,aAAaC,aAAaA,CAAA,EAAG;IAE3B,MAAMC,UAAU,GAAC,MAAMH,MAAM,CAACI,YAAY,CAAC,CAAC;EAC9C;EACA,aAAaC,eAAeA,CAACC,OAAO,EAAEC,SAAS,EAAE;IAC/C,IAAIC,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACN,OAAO,CAACO,GAAG,CAAC,CAAC;IAE5D,IAAI,CAACL,QAAQ,EAAE;MACbD,SAAS,CAAC,uBAAuB,CAAC;MAClCA,SAAS,CAAC,mBAAmB,EAAED,OAAO,CAACQ,QAAQ,EAAER,OAAO,CAACS,OAAO,CAAC;MACjEC,OAAO,CAACC,GAAG,CAACX,OAAO,CAAC;MACpB,MAAMH,UAAU,GAAG,MAAMH,MAAM,CAACI,YAAY,CAC1CE,OAAO,CAACQ,QAAQ,EAChBR,OAAO,CAACS,OACV,CAAC;MACDC,OAAO,CAACC,GAAG,CAACd,UAAU,CAAC;MAEvBI,SAAS,CAAC,oBAAoB,EAAED,OAAO,CAACY,KAAK,CAAC;MAC9C,MAAMC,WAAW,GAAG,MAAMnB,MAAM,CAACoB,aAAa,CAACjB,UAAU,CAACe,KAAK,CAAC;MAChEX,SAAS,CAAC,yBAAyB,EAAED,OAAO,CAACY,KAAK,CAAC;MACnD,MAAMG,eAAe,GAAG,MAAMrB,MAAM,CAACsB,iBAAiB,CAACnB,UAAU,CAACe,KAAK,CAAC;MAExE,MAAMK,YAAY,GAAG,IAAIxB,YAAY,CAACsB,eAAe,CAAC;MACtDb,QAAQ,GAAG,IAAIX,QAAQ,CAACM,UAAU,EAAEgB,WAAW,EAAEI,YAAY,CAAC;MAE9DZ,YAAY,CAACa,OAAO,CAAClB,OAAO,CAACO,GAAG,EAAEJ,IAAI,CAACgB,SAAS,CAACjB,QAAQ,CAAC,CAAC;IAC7D;IAEA,OAAOA,QAAQ;EACjB;EAEA,aAAakB,mBAAmBA,CAACR,KAAK,EAAEK,YAAY,EAAEhB,SAAS,EAAE;IAC/D,MAAMoB,SAAS,GAAGlB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE;IAChE,MAAMgB,UAAU,GAAGD,SAAS,CAACE,MAAM,GAAG,CAAC,GAAGF,SAAS,GAAGJ,YAAY,CAACO,GAAG;IAEtE,MAAMC,OAAO,GAAG,EAAE;IAClB,KAAK,MAAM,CAACC,KAAK,EAAEC,OAAO,CAAC,IAAIL,UAAU,CAACM,OAAO,CAAC,CAAC,EAAE;MACnD3B,SAAS,CAAC,WAAWyB,KAAK,GAAG,CAAC,OAAOJ,UAAU,CAACC,MAAM,EAAE,CAAC;MAEzD,MAAMM,QAAQ,GAAG,MAAMnC,MAAM,CAACoC,cAAc,CAACH,OAAO,CAAC;MACrDjB,OAAO,CAACC,GAAG,CAACkB,QAAQ,CAAC;MAErB,MAAME,KAAK,GAAG,IAAIvC,KAAK,CAACqC,QAAQ,CAACG,QAAQ,CAACL,OAAO,CAAC;MAClDI,KAAK,CAACE,MAAM,GAAGF,KAAK,CAACG,SAAS,CAC5BtB,KAAK,EACLiB,QAAQ,CAACG,QAAQ,CAACG,YAAY,EAC9BN,QAAQ,CAACO,IAAI,CAACD,YAChB,CAAC;MAEDJ,KAAK,CAACM,QAAQ,GAAGN,KAAK,CAACO,WAAW,CAChC1B,KAAK,EACLmB,KAAK,CAACE,MAAM,CAACM,eAAe,EAC5BV,QAAQ,CAACO,IAAI,CAACD,YAChB,CAAC;MAEDV,OAAO,CAACe,IAAI,CAACT,KAAK,CAAC;IACrB;IAEA9B,SAAS,CAAC,IAAI,CAAC;IACf,OAAOwB,OAAO;EAChB;EAEA,aAAagB,WAAWA,CAAC7B,KAAK,EAAEG,eAAe,EAAE;IAC/CL,OAAO,CAACC,GAAG,CAACC,KAAK,EAAEG,eAAe,CAAC;IAEnC,MAAM2B,IAAI,GAAG,EAAE;IACf,KAAK,MAAMX,KAAK,IAAIhB,eAAe,EAAE;MACnC,MAAMkB,MAAM,GAAGF,KAAK,CAACG,SAAS,CAACtB,KAAK,CAAC;MACrC,IAAIqB,MAAM,CAACU,SAAS,KAAK,CAAC,EAAE;QAC1BD,IAAI,CAACF,IAAI,CAACT,KAAK,CAAC;MAClB;IACF;IAEArB,OAAO,CAACC,GAAG,CAAC+B,IAAI,CAAC;IACjB,OAAOA,IAAI;EACb;AACF;AAEA,eAAe/C,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}