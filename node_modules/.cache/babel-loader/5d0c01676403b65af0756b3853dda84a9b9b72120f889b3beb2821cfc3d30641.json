{"ast":null,"code":"import Summoner from \"objects/Summoner\";\nimport Match from \"./Match\";\nimport { Client } from \"api/client\";\nclass DataManager {\n  static async getSummonerData(account) {\n    const key = `${account.gameName}#${account.tagLine}`;\n    let summoner = JSON.parse(localStorage.getItem(key));\n    if (!summoner) {\n      const accountDto = await Client.fetchAccount(account.gameName, account.tagLine);\n      const summonerDto = await Client.fetchSummoner(accountDto.puuid);\n      const matchHistory = await Client.fetchMatchHistory(accountDto.puuid);\n      console.log(accountDto);\n      summoner = new Summoner(accountDto, summonerDto, matchHistory);\n      localStorage.setItem(key, JSON.stringify(summoner));\n    }\n    return summoner;\n  }\n  static async getMatches(matchHistory, setStatus) {\n    const savedWins = JSON.parse(localStorage.getItem(\"wins\")) || [];\n    const idsToFetch = savedWins.length > 0 ? savedWins : matchHistory;\n    const matches = [];\n    for (const [index, matchId] of idsToFetch.entries()) {\n      setStatus(`loading ${index + 1} of ${idsToFetch.length}`);\n      const matchDto = await Client.fetchMatchData(matchId);\n      const match = new Match(matchDto);\n      matches.push(match);\n    }\n    setStatus(null);\n    return matches;\n  }\n  static async processWins(puuid, matches) {\n    console.log(puuid, matches);\n    const wins = [];\n    for (const match of matches) {\n      const player = match.getPlayer(puuid);\n      if (player.placement === 1) {\n        wins.push(match);\n      }\n    }\n    console.log(wins);\n    return wins;\n  }\n}\nexport default DataManager;","map":{"version":3,"names":["Summoner","Match","Client","DataManager","getSummonerData","account","key","gameName","tagLine","summoner","JSON","parse","localStorage","getItem","accountDto","fetchAccount","summonerDto","fetchSummoner","puuid","matchHistory","fetchMatchHistory","console","log","setItem","stringify","getMatches","setStatus","savedWins","idsToFetch","length","matches","index","matchId","entries","matchDto","fetchMatchData","match","push","processWins","wins","player","getPlayer","placement"],"sources":["C:/Users/Jayden/projects/atr/src/objects/DataManager.js"],"sourcesContent":["import Summoner from \"objects/Summoner\";\r\nimport Match from \"./Match\";\r\n\r\nimport { Client } from \"api/client\";\r\n\r\nclass DataManager {\r\n  static async getSummonerData(account) {\r\n    const key = `${account.gameName}#${account.tagLine}`;\r\n\r\n    let summoner = JSON.parse(localStorage.getItem(key));\r\n\r\n    if (!summoner) {\r\n      const accountDto = await Client.fetchAccount(\r\n        account.gameName,\r\n        account.tagLine\r\n      );\r\n      const summonerDto = await Client.fetchSummoner(accountDto.puuid);\r\n      const matchHistory = await Client.fetchMatchHistory(accountDto.puuid);\r\n\r\n      console.log(accountDto);\r\n      summoner = new Summoner(accountDto, summonerDto, matchHistory);\r\n\r\n      localStorage.setItem(key, JSON.stringify(summoner));\r\n    }\r\n\r\n    return summoner;\r\n  }\r\n  static async getMatches(matchHistory, setStatus) {\r\n    const savedWins = JSON.parse(localStorage.getItem(\"wins\")) || [];\r\n    const idsToFetch = savedWins.length > 0 ? savedWins : matchHistory;\r\n    const matches = [];\r\n\r\n    for (const [index, matchId] of idsToFetch.entries()) {\r\n      setStatus(`loading ${index + 1} of ${idsToFetch.length}`);\r\n      const matchDto = await Client.fetchMatchData(matchId);\r\n      const match = new Match(matchDto);\r\n      matches.push(match);\r\n    }\r\n\r\n    setStatus(null);\r\n    return matches;\r\n  }\r\n\r\n  static async processWins(puuid, matches) {\r\n    console.log(puuid, matches);\r\n    const wins = [];\r\n    for (const match of matches) {\r\n      const player = match.getPlayer(puuid);\r\n      if (player.placement === 1) {\r\n        wins.push(match);\r\n      }\r\n    }\r\n    console.log(wins);\r\n    return wins;\r\n  }\r\n}\r\n\r\nexport default DataManager;\r\n"],"mappings":"AAAA,OAAOA,QAAQ,MAAM,kBAAkB;AACvC,OAAOC,KAAK,MAAM,SAAS;AAE3B,SAASC,MAAM,QAAQ,YAAY;AAEnC,MAAMC,WAAW,CAAC;EAChB,aAAaC,eAAeA,CAACC,OAAO,EAAE;IACpC,MAAMC,GAAG,GAAG,GAAGD,OAAO,CAACE,QAAQ,IAAIF,OAAO,CAACG,OAAO,EAAE;IAEpD,IAAIC,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACP,GAAG,CAAC,CAAC;IAEpD,IAAI,CAACG,QAAQ,EAAE;MACb,MAAMK,UAAU,GAAG,MAAMZ,MAAM,CAACa,YAAY,CAC1CV,OAAO,CAACE,QAAQ,EAChBF,OAAO,CAACG,OACV,CAAC;MACD,MAAMQ,WAAW,GAAG,MAAMd,MAAM,CAACe,aAAa,CAACH,UAAU,CAACI,KAAK,CAAC;MAChE,MAAMC,YAAY,GAAG,MAAMjB,MAAM,CAACkB,iBAAiB,CAACN,UAAU,CAACI,KAAK,CAAC;MAErEG,OAAO,CAACC,GAAG,CAACR,UAAU,CAAC;MACvBL,QAAQ,GAAG,IAAIT,QAAQ,CAACc,UAAU,EAAEE,WAAW,EAAEG,YAAY,CAAC;MAE9DP,YAAY,CAACW,OAAO,CAACjB,GAAG,EAAEI,IAAI,CAACc,SAAS,CAACf,QAAQ,CAAC,CAAC;IACrD;IAEA,OAAOA,QAAQ;EACjB;EACA,aAAagB,UAAUA,CAACN,YAAY,EAAEO,SAAS,EAAE;IAC/C,MAAMC,SAAS,GAAGjB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE;IAChE,MAAMe,UAAU,GAAGD,SAAS,CAACE,MAAM,GAAG,CAAC,GAAGF,SAAS,GAAGR,YAAY;IAClE,MAAMW,OAAO,GAAG,EAAE;IAElB,KAAK,MAAM,CAACC,KAAK,EAAEC,OAAO,CAAC,IAAIJ,UAAU,CAACK,OAAO,CAAC,CAAC,EAAE;MACnDP,SAAS,CAAC,WAAWK,KAAK,GAAG,CAAC,OAAOH,UAAU,CAACC,MAAM,EAAE,CAAC;MACzD,MAAMK,QAAQ,GAAG,MAAMhC,MAAM,CAACiC,cAAc,CAACH,OAAO,CAAC;MACrD,MAAMI,KAAK,GAAG,IAAInC,KAAK,CAACiC,QAAQ,CAAC;MACjCJ,OAAO,CAACO,IAAI,CAACD,KAAK,CAAC;IACrB;IAEAV,SAAS,CAAC,IAAI,CAAC;IACf,OAAOI,OAAO;EAChB;EAEA,aAAaQ,WAAWA,CAACpB,KAAK,EAAEY,OAAO,EAAE;IACvCT,OAAO,CAACC,GAAG,CAACJ,KAAK,EAAEY,OAAO,CAAC;IAC3B,MAAMS,IAAI,GAAG,EAAE;IACf,KAAK,MAAMH,KAAK,IAAIN,OAAO,EAAE;MAC3B,MAAMU,MAAM,GAAGJ,KAAK,CAACK,SAAS,CAACvB,KAAK,CAAC;MACrC,IAAIsB,MAAM,CAACE,SAAS,KAAK,CAAC,EAAE;QAC1BH,IAAI,CAACF,IAAI,CAACD,KAAK,CAAC;MAClB;IACF;IACAf,OAAO,CAACC,GAAG,CAACiB,IAAI,CAAC;IACjB,OAAOA,IAAI;EACb;AACF;AAEA,eAAepC,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}