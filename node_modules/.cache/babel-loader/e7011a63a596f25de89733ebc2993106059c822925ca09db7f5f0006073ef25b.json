{"ast":null,"code":"import Match from \"./Match\";\nimport { Client } from \"api/client\";\nimport Account from \"./Account\";\nconst KEY = {\n  ACCOUNTS: \"Accounts\"\n};\nclass StorageManager {\n  static getAccounts() {\n    const json = JSON.parse(localStorage.getItem(KEY.ACCOUNTS)) || [];\n    const accounts = json.map(account => new Account(account.puuid, account.gameName, account.tagLine));\n    return accounts;\n  }\n  static saveDummyAccount() {\n    localStorage.setItem(\"Accounts\", JSON.stringify([new Account(\"bhCte-xYzDzNtuF7Qx6DsjHdLPI9zJpJkg-77kL4V4w6Jxcg2FKtg__UpBfW2rtM-fkyEAK1FDMXfA\", \"TannerennaT\", \"NA1\")]));\n  }\n  static async getMatchHistoryData(puuid, matchHistory, setStatus) {\n    const savedWins = JSON.parse(localStorage.getItem(\"wins\")) || [];\n    const idsToFetch = savedWins.length > 0 ? savedWins : Object.entries(matchHistory);\n    const matches = [];\n    for (const [index, [matchId, matchData]] of idsToFetch.entries()) {\n      // setStatus(`loading ${index + 1} of ${idsToFetch.length}`);\n\n      const matchDto = await Client.fetchMatchData(matchId);\n      const match = new Match(matchDto.metadata.matchId);\n      match.player = match.getPlayer(puuid, matchDto.metadata.participants, matchDto.info.participants);\n      match.teammate = match.getTeammate(puuid, match.player.playerSubteamId, matchDto.info.participants);\n      matches.push(match);\n    }\n\n    // setStatus(null);\n    return matches;\n  }\n  static async processWins(puuid, matchHistoryIds) {\n    const wins = [];\n    for (const match of matchHistoryIds) {\n      const player = match.getPlayer(puuid);\n      if (player.placement === 1) {\n        wins.push(match);\n      }\n    }\n    return wins;\n  }\n}\nexport default StorageManager;","map":{"version":3,"names":["Match","Client","Account","KEY","ACCOUNTS","StorageManager","getAccounts","json","JSON","parse","localStorage","getItem","accounts","map","account","puuid","gameName","tagLine","saveDummyAccount","setItem","stringify","getMatchHistoryData","matchHistory","setStatus","savedWins","idsToFetch","length","Object","entries","matches","index","matchId","matchData","matchDto","fetchMatchData","match","metadata","player","getPlayer","participants","info","teammate","getTeammate","playerSubteamId","push","processWins","matchHistoryIds","wins","placement"],"sources":["C:/Users/Jayden/projects/atr/src/objects/StorageManager.js"],"sourcesContent":["\r\nimport Match from \"./Match\";\r\n\r\nimport { Client } from \"api/client\";\r\nimport Account from \"./Account\";\r\n\r\nconst KEY = {\r\n  ACCOUNTS: \"Accounts\",\r\n};\r\n\r\nclass StorageManager {\r\n  static getAccounts() {\r\n    const json = JSON.parse(localStorage.getItem(KEY.ACCOUNTS)) || [];\r\n    const accounts = json.map(\r\n      (account) => new Account(account.puuid, account.gameName, account.tagLine)\r\n    );\r\n    return accounts;\r\n  }\r\n\r\n  static saveDummyAccount() {\r\n    localStorage.setItem(\r\n      \"Accounts\",\r\n      JSON.stringify([\r\n        new Account(\r\n          \"bhCte-xYzDzNtuF7Qx6DsjHdLPI9zJpJkg-77kL4V4w6Jxcg2FKtg__UpBfW2rtM-fkyEAK1FDMXfA\",\r\n          \"TannerennaT\",\r\n          \"NA1\"\r\n        ),\r\n      ])\r\n    );\r\n  }\r\n\r\n  static async getMatchHistoryData(puuid, matchHistory, setStatus) {\r\n    const savedWins = JSON.parse(localStorage.getItem(\"wins\")) || [];\r\n    const idsToFetch =\r\n      savedWins.length > 0 ? savedWins : Object.entries(matchHistory);\r\n\r\n    const matches = [];\r\n    for (const [index, [matchId, matchData]] of idsToFetch.entries()) {\r\n      // setStatus(`loading ${index + 1} of ${idsToFetch.length}`);\r\n\r\n      const matchDto = await Client.fetchMatchData(matchId);\r\n\r\n      const match = new Match(matchDto.metadata.matchId);\r\n      match.player = match.getPlayer(\r\n        puuid,\r\n        matchDto.metadata.participants,\r\n        matchDto.info.participants\r\n      );\r\n\r\n      match.teammate = match.getTeammate(\r\n        puuid,\r\n        match.player.playerSubteamId,\r\n        matchDto.info.participants\r\n      );\r\n\r\n      matches.push(match);\r\n    }\r\n\r\n    // setStatus(null);\r\n    return matches;\r\n  }\r\n\r\n  static async processWins(puuid, matchHistoryIds) {\r\n    const wins = [];\r\n    for (const match of matchHistoryIds) {\r\n      const player = match.getPlayer(puuid);\r\n      if (player.placement === 1) {\r\n        wins.push(match);\r\n      }\r\n    }\r\n\r\n    return wins;\r\n  }\r\n}\r\n\r\nexport default StorageManager;\r\n"],"mappings":"AACA,OAAOA,KAAK,MAAM,SAAS;AAE3B,SAASC,MAAM,QAAQ,YAAY;AACnC,OAAOC,OAAO,MAAM,WAAW;AAE/B,MAAMC,GAAG,GAAG;EACVC,QAAQ,EAAE;AACZ,CAAC;AAED,MAAMC,cAAc,CAAC;EACnB,OAAOC,WAAWA,CAAA,EAAG;IACnB,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAACR,GAAG,CAACC,QAAQ,CAAC,CAAC,IAAI,EAAE;IACjE,MAAMQ,QAAQ,GAAGL,IAAI,CAACM,GAAG,CACtBC,OAAO,IAAK,IAAIZ,OAAO,CAACY,OAAO,CAACC,KAAK,EAAED,OAAO,CAACE,QAAQ,EAAEF,OAAO,CAACG,OAAO,CAC3E,CAAC;IACD,OAAOL,QAAQ;EACjB;EAEA,OAAOM,gBAAgBA,CAAA,EAAG;IACxBR,YAAY,CAACS,OAAO,CAClB,UAAU,EACVX,IAAI,CAACY,SAAS,CAAC,CACb,IAAIlB,OAAO,CACT,gFAAgF,EAChF,aAAa,EACb,KACF,CAAC,CACF,CACH,CAAC;EACH;EAEA,aAAamB,mBAAmBA,CAACN,KAAK,EAAEO,YAAY,EAAEC,SAAS,EAAE;IAC/D,MAAMC,SAAS,GAAGhB,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE;IAChE,MAAMc,UAAU,GACdD,SAAS,CAACE,MAAM,GAAG,CAAC,GAAGF,SAAS,GAAGG,MAAM,CAACC,OAAO,CAACN,YAAY,CAAC;IAEjE,MAAMO,OAAO,GAAG,EAAE;IAClB,KAAK,MAAM,CAACC,KAAK,EAAE,CAACC,OAAO,EAAEC,SAAS,CAAC,CAAC,IAAIP,UAAU,CAACG,OAAO,CAAC,CAAC,EAAE;MAChE;;MAEA,MAAMK,QAAQ,GAAG,MAAMhC,MAAM,CAACiC,cAAc,CAACH,OAAO,CAAC;MAErD,MAAMI,KAAK,GAAG,IAAInC,KAAK,CAACiC,QAAQ,CAACG,QAAQ,CAACL,OAAO,CAAC;MAClDI,KAAK,CAACE,MAAM,GAAGF,KAAK,CAACG,SAAS,CAC5BvB,KAAK,EACLkB,QAAQ,CAACG,QAAQ,CAACG,YAAY,EAC9BN,QAAQ,CAACO,IAAI,CAACD,YAChB,CAAC;MAEDJ,KAAK,CAACM,QAAQ,GAAGN,KAAK,CAACO,WAAW,CAChC3B,KAAK,EACLoB,KAAK,CAACE,MAAM,CAACM,eAAe,EAC5BV,QAAQ,CAACO,IAAI,CAACD,YAChB,CAAC;MAEDV,OAAO,CAACe,IAAI,CAACT,KAAK,CAAC;IACrB;;IAEA;IACA,OAAON,OAAO;EAChB;EAEA,aAAagB,WAAWA,CAAC9B,KAAK,EAAE+B,eAAe,EAAE;IAC/C,MAAMC,IAAI,GAAG,EAAE;IACf,KAAK,MAAMZ,KAAK,IAAIW,eAAe,EAAE;MACnC,MAAMT,MAAM,GAAGF,KAAK,CAACG,SAAS,CAACvB,KAAK,CAAC;MACrC,IAAIsB,MAAM,CAACW,SAAS,KAAK,CAAC,EAAE;QAC1BD,IAAI,CAACH,IAAI,CAACT,KAAK,CAAC;MAClB;IACF;IAEA,OAAOY,IAAI;EACb;AACF;AAEA,eAAe1C,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}