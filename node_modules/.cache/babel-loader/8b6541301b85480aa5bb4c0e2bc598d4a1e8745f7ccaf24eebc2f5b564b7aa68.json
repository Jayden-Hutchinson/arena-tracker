{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jayden\\\\projects\\\\atr\\\\src\\\\react\\\\components\\\\match_history\\\\MatchHistory.js\",\n  _s = $RefreshSig$();\nimport \"./MatchHistory.css\";\nimport Match from \"../match/Match.js\";\nimport { useEffect, useState } from \"react\";\nimport { ClientApi } from \"../../../api/clientApi.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass MatchInfo {\n  constructor(puuid, {\n    info\n  }) {\n    this.player = this.getPlayer(puuid, info);\n    this.team = this.getTeam(puuid, info);\n    this.duration = this.getMatchDuration(info);\n    this.date = this.getDate(info);\n    this.placement = this.getPlacement(info);\n  }\n  getDate(info) {\n    const date = new Date(info.gameCreation);\n    return `${date.getMonth()}/${date.getDate()}/${date.getFullYear()}`;\n  }\n  getMatchDuration(info) {\n    const totalSeconds = info.gameDuration;\n    const seconds = totalSeconds % 60;\n    const minutes = Math.floor(totalSeconds / 60);\n    return `${minutes}:${seconds.toString().padStart(2, \"0\")}`;\n  }\n  getPlayer(puuid, info) {\n    console.log(info);\n    return info.participants.find(player => player.puuid === puuid);\n  }\n  getTeam(puuid, info) {\n    const teamMate = info.participants.find(teamMate => teamMate.playerSubteamId === this.player.playerSubteamId && teamMate.puuid !== puuid);\n    const team = [this.player, teamMate];\n    return {\n      id: this.player.teamId,\n      players: team\n    };\n  }\n  getPlacement() {\n    return this.player.placement;\n  }\n}\nfunction MatchHistory({\n  puuid,\n  matchIds\n}) {\n  _s();\n  const [matches, setMatches] = useState([]);\n  const [wins, setWins] = useState([]);\n  const [status, setStatus] = useState();\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    async function sleep(ms) {\n      return new Promise(res => setTimeout(res, ms));\n    }\n    async function getMatchIds() {\n      setLoading(true);\n      const wins = JSON.parse(localStorage.getItem(\"wins\")) || [];\n      const idsToFetch = wins.length > 0 ? wins : matchIds;\n      console.log(idsToFetch);\n      console.log(wins);\n      console.log(idsToFetch);\n      for (const [index, id] of idsToFetch.entries()) {\n        setStatus(`Loading: ${index} / ${idsToFetch.length}`);\n        // const fetchStart = Date.now();\n        const matchData = await ClientApi.fetchMatchData(id);\n        // await sleep(200);\n\n        // const fetchDuration = Date.now() - fetchStart;\n        // const sleepMs = 1200 - fetchDuration;\n        // await sleep(sleepMs);\n\n        const matchInfo = new MatchInfo(puuid, matchData);\n        if (matchInfo.getPlacement() === 1 && !wins.includes(id)) {\n          wins.push(id);\n          setWins(prev => [...prev, matchInfo]);\n        }\n        setWins(prev => [...prev, matchInfo]);\n        localStorage.setItem(\"wins\", JSON.stringify(wins));\n        setMatches(prev => [...prev, matchInfo]);\n      }\n      setLoading(false);\n      // setWins(wins);\n    }\n    getMatchIds();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    className: \"MatchHistory\",\n    children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this) : matches && wins.map((matchInfo, index) => {\n      return /*#__PURE__*/_jsxDEV(Match, {\n        puuid: puuid,\n        matchInfo: matchInfo\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 18\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n}\n_s(MatchHistory, \"HCdHjH9mmfUx+mCBo/VCKr5l9zs=\");\n_c = MatchHistory;\nexport default MatchHistory;\nvar _c;\n$RefreshReg$(_c, \"MatchHistory\");","map":{"version":3,"names":["Match","useEffect","useState","ClientApi","jsxDEV","_jsxDEV","MatchInfo","constructor","puuid","info","player","getPlayer","team","getTeam","duration","getMatchDuration","date","getDate","placement","getPlacement","Date","gameCreation","getMonth","getFullYear","totalSeconds","gameDuration","seconds","minutes","Math","floor","toString","padStart","console","log","participants","find","teamMate","playerSubteamId","id","teamId","players","MatchHistory","matchIds","_s","matches","setMatches","wins","setWins","status","setStatus","loading","setLoading","sleep","ms","Promise","res","setTimeout","getMatchIds","JSON","parse","localStorage","getItem","idsToFetch","length","index","entries","matchData","fetchMatchData","matchInfo","includes","push","prev","setItem","stringify","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","_c","$RefreshReg$"],"sources":["C:/Users/Jayden/projects/atr/src/react/components/match_history/MatchHistory.js"],"sourcesContent":["import \"./MatchHistory.css\";\r\n\r\nimport Match from \"../match/Match.js\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { ClientApi } from \"../../../api/clientApi.js\";\r\n\r\nclass MatchInfo {\r\n  constructor(puuid, { info }) {\r\n    this.player = this.getPlayer(puuid, info);\r\n    this.team = this.getTeam(puuid, info);\r\n    this.duration = this.getMatchDuration(info);\r\n    this.date = this.getDate(info);\r\n    this.placement = this.getPlacement(info);\r\n  }\r\n\r\n  getDate(info) {\r\n    const date = new Date(info.gameCreation);\r\n    return `${date.getMonth()}/${date.getDate()}/${date.getFullYear()}`;\r\n  }\r\n\r\n  getMatchDuration(info) {\r\n    const totalSeconds = info.gameDuration;\r\n    const seconds = totalSeconds % 60;\r\n    const minutes = Math.floor(totalSeconds / 60);\r\n    return `${minutes}:${seconds.toString().padStart(2, \"0\")}`;\r\n  }\r\n\r\n  getPlayer(puuid, info) {\r\n    console.log(info)\r\n    return info.participants.find((player) => player.puuid === puuid);\r\n  }\r\n\r\n  getTeam(puuid, info) {\r\n    const teamMate = info.participants.find(\r\n      (teamMate) =>\r\n        teamMate.playerSubteamId === this.player.playerSubteamId &&\r\n        teamMate.puuid !== puuid\r\n    );\r\n\r\n    const team = [this.player, teamMate];\r\n    return { id: this.player.teamId, players: team };\r\n  }\r\n\r\n  getPlacement() {\r\n    return this.player.placement;\r\n  }\r\n}\r\nfunction MatchHistory({ puuid, matchIds }) {\r\n  const [matches, setMatches] = useState([]);\r\n  const [wins, setWins] = useState([]);\r\n  const [status, setStatus] = useState();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    async function sleep(ms) {\r\n      return new Promise((res) => setTimeout(res, ms));\r\n    }\r\n\r\n    async function getMatchIds() {\r\n      setLoading(true);\r\n      const wins = JSON.parse(localStorage.getItem(\"wins\")) || [];\r\n      const idsToFetch = wins.length > 0 ? wins : matchIds;\r\n\r\n      console.log(idsToFetch)\r\n      console.log(wins);\r\n      console.log(idsToFetch);\r\n\r\n      for (const [index, id] of idsToFetch.entries()) {\r\n        setStatus(`Loading: ${index} / ${idsToFetch.length}`);\r\n        // const fetchStart = Date.now();\r\n        const matchData = await ClientApi.fetchMatchData(id);\r\n        // await sleep(200);\r\n\r\n        // const fetchDuration = Date.now() - fetchStart;\r\n        // const sleepMs = 1200 - fetchDuration;\r\n        // await sleep(sleepMs);\r\n\r\n        const matchInfo = new MatchInfo(puuid, matchData);\r\n\r\n        if (matchInfo.getPlacement() === 1 && !wins.includes(id)) {\r\n          wins.push(id);\r\n          setWins((prev) => [...prev, matchInfo]);\r\n        }\r\n\r\n        setWins((prev) => [...prev, matchInfo]);\r\n        localStorage.setItem(\"wins\", JSON.stringify(wins));\r\n        setMatches((prev) => [...prev, matchInfo]);\r\n      }\r\n\r\n      setLoading(false);\r\n      // setWins(wins);\r\n    }\r\n    getMatchIds();\r\n  }, []);\r\n\r\n  return (\r\n    <ul className=\"MatchHistory\">\r\n      {loading ? (\r\n        <div>{status}</div>\r\n      ) : (\r\n        matches &&\r\n        wins.map((matchInfo, index) => {\r\n          return <Match key={index} puuid={puuid} matchInfo={matchInfo} />;\r\n        })\r\n      )}\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default MatchHistory;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}